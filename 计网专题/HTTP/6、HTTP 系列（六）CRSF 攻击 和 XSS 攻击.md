#  CRSF 攻击 和 XSS 攻击

## 3、CSRF 攻击（ *跨站请求伪造*）

CSRF 攻击 就是黑客 未经本人许可 以 本人 的名义发送恶意请求（修改密码，银行转账等）

CSRF 攻击原理是 **因为用户浏览器存在目标网站的 cookie，同时浏览器分不清发起请求的是否是用户本人，对目标网站的请求都会带上 cookie，以此来伪造用户对目标网站的请求**



**CSRF 攻击模拟：**

- 用户 X 登录了某银行网站 A，这时候银行后台会发送一个 cookie 给 X，浏览器会保存这个 cookie
- X 被一个危险的网站 B 诱导访问
- 网站 B 中内部有一个隐藏的 form 表单，是 POST 请求的，当用户 X  点击了某些东西的时候，就会触发这个表单的提交事件，表单提交的内容是向 银行网站 A 要求将 X 的 1000 元转账到 中间人 F 账户中
- 这时候由于 X 访问 网站 B 的浏览器同时也是之前访问 银行网站 A 的浏览器，因此浏览器会将 cookie 跟着请求一起发送给银行网站 A，网站 A  收到后发现有 cookie 就不再进行登录验证，而是执行转账
- 这样， X 的 1000 元就没有了

我们可以看出，中间人 F 他并没有获取 X 的 cookie，他并不知道 X 的 cookie 的内容，只是通过 X 点击了某些东西触发了表单提交，使得浏览器发送出请求；这相当于是 存在一个转账请求按钮，不过不是 用户 X 自己点的，而是 中间人 F 帮助 用户 X 点的，因此浏览器无法察觉这是否是来自用户的请求，只是一味的将请求发送出去



CSRF 防范手段：

- 最好的就是 **验证码**，对于那种很恶心的图片验证码等，攻击者很难做到自动识别添加，这种需要用户自己去操作，当用户点击某个普通的按钮发现需要填入验证码时，可以判断自己是否遭受到 CSRF 攻击



## 4、XSS 攻击 （ *跨站脚本攻击* ）

一般情况下，常用的 XSS 攻击是使用 JavaScript 进行攻击，即 JS 注入

比如我们在一个网站的文本框中输入 ` <script> xxx </script>`，浏览器会认为是插入了一段 HTML 标签，而不会当作一个普通的字符串去处理，如果在这个 HTML 标签中指定导入恶意的 JavaScript 脚本，那么脚本就会在用户浏览器中执行，从而导致攻击的目标



XSS 防范手段：

- 过滤 <script> 等 HTML 标签
- 对  <> 等符号进行转义，比如 < 变成 `&lt`, 让它们失去 前端语言代表的语义